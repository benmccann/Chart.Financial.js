<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Financial > Candlestick | Chart.js sample</title>
	<script src="../moment.js" type="text/javascript"></script>
	<script src="../Chart.bundle.js" type="text/javascript"></script>
	<script src="../Chart.Financial.js" type="text/javascript"></script>
	<link rel="stylesheet" type="text/css" href="../style.css">
	<link rel="icon" href="../favicon.ico"/>
</head>
<body>

	<a href="../index.html">Home</a>
	<div class="content">
		<h2>Candlestick</h2>
		<div style="width:1000px">
			<canvas id="chart1"></canvas>
		<div>
		<h2>Custom Candlestick</h2>
		<div style="width:1000px">
			<canvas id="chart2"></canvas>
		<div>
		<h2>Candlestick with long tooltip</h2>
		<div style="width:1000px">
			<canvas id="chart3"></canvas>
		<div>
	</div>

	<script>
		function randomNumber(min, max) {
			return Math.random() * (max - min) + min;
		}

		function randomBar(date, lastClose) {
			var open = randomNumber(lastClose * .95, lastClose * 1.05);
			var close = randomNumber(open * .95, open * 1.05);
			var high = randomNumber(Math.max(open, close), Math.max(open, close) * 1.1);
			var low = randomNumber(Math.min(open, close) * .9, Math.min(open, close));
			return {
				t: date.valueOf(),
				o: open,
				h: high,
				l: low,
				c: close,
			};
		}

		var dateFormat = 'MMMM DD YYYY';
		var date = moment('April 01 2017', dateFormat);
		var data = [randomBar(date, 30)];
		while (data.length < 60) {
			date = date.clone().add(1, 'd');
			if (date.isoWeekday() <= 5) {
				data.push(randomBar(date, data[data.length - 1].c));
			}
		}

		// Candlestick
		var ctx = document.getElementById("chart1").getContext("2d");
		ctx.canvas.width = 1000;
		ctx.canvas.height = 250;
		new Chart(ctx, {
			type: 'candlestick',
			data: {
				datasets: [{
					label: "CHRT - Chart.js Corporation",
					data: data,
					tooltipLength: 2,
				}]
			},
			options: {
				tooltips: {
					position: 'nearest',
					mode: 'index',
				},
			},
		});

		// Custom Candlestick
		var ctx2 = document.getElementById("chart2").getContext("2d");
		ctx2.canvas.width = 1000;
		ctx2.canvas.height = 250;
		new Chart(ctx2, {
			type: 'candlestick',
			data: {
				datasets: [{
					color: {
						up: '#11f',
						down: '#fb8',
						linear: '#000',
						outline: '#000',
					},
					outlineWidth: 2,
					label: "CHRT - Chart.js Corporation",
					data: data
				}]
			}
		});

		// Longer tooltip
		var ctx3 = document.getElementById("chart3").getContext("2d");
		ctx3.canvas.width = 1000;
		ctx3.canvas.height = 250;
		new Chart(ctx3, {
			type: 'candlestick',
			data: {
				datasets: [{
					label: "CHRT - Chart.js Corporation",
					data: data,
					tooltipLength: 5,
				}]
			},
			options: {
				tooltips: {
					position: 'nearest',
					mode: 'index',
				},
			},
		});

	</script>
</body>
